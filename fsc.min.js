!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.FSC=r():e.FSC=r()}(window,function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=1)}([function(e,r,t){"use strict";function n(e,r,t,o){this.message=e,this.expected=r,this.found=t,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}!function(e,r){function t(){this.constructor=e}t.prototype=r.prototype,e.prototype=new t}(n,Error),n.buildMessage=function(e,r){var t={literal:function(e){return'"'+o(e.text)+'"'},class:function(e){var r,t="";for(r=0;r<e.parts.length;r++)t+=e.parts[r]instanceof Array?u(e.parts[r][0])+"-"+u(e.parts[r][1]):u(e.parts[r]);return"["+(e.inverted?"^":"")+t+"]"},any:function(e){return"any character"},end:function(e){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}function u(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}return"Expected "+function(e){var r,n,o,u=new Array(e.length);for(r=0;r<e.length;r++)u[r]=(o=e[r],t[o.type](o));if(u.sort(),u.length>0){for(r=1,n=1;r<u.length;r++)u[r-1]!==u[r]&&(u[n]=u[r],n++);u.length=n}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}(e)+" but "+function(e){return e?'"'+o(e)+'"':"end of input"}(r)+" found."},e.exports={SyntaxError:n,parse:function(e,r){r=void 0!==r?r:{};var t,o={},u={Start:Ee},a=Ee,i=function(e){return e||[]},c=function(e,r){return[e].concat(r.map(e=>e[1]))},f=function(e,r){return{type:"values",payload:[e].concat(r.map(e=>e[1]))}},l=function(e){return{type:"variable",name:e}},s="C",p=ge("C",!1),v="(",h=ge("(",!1),d=")",y=ge(")",!1),g=function(e){return{type:"values",payload:[{type:"parenthesis",value:"["}].concat(e||[]).concat({type:"parenthesis",value:"]"})}},m=function(e){return{type:"values",payload:[{type:"parenthesis",value:"("}].concat(e||[]).concat({type:"parenthesis",value:")"})}},A=function(e){return{type:"primitive",value:e.join("")}},x="=",b=ge("=",!1),C=function(e,r){return{type:"assignment",name:e,payload:r}},w={type:"any"},E=Ae("whitespace"),S="\t",F=ge("\t",!1),j="\v",T=ge("\v",!1),k="\f",_=ge("\f",!1),P=" ",M=ge(" ",!1),O=" ",R=ge(" ",!1),V="\ufeff",I=ge("\ufeff",!1),N=/^[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,U=me([" "," "," ",[" "," "]," "," ","　"],!1,!1),q=/^[\n\r\u2028\u2029]/,z=me(["\n","\r","\u2028","\u2029"],!1,!1),B=Ae("end of line"),D="\n",G=ge("\n",!1),H="\r\n",J=ge("\r\n",!1),K="\r",L=ge("\r",!1),Q="\u2028",W=ge("\u2028",!1),X="\u2029",Y=ge("\u2029",!1),Z=Ae("comment"),$="/*",ee=ge("/*",!1),re="*/",te=ge("*/",!1),ne="//",oe=ge("//",!1),ue=Ae("identifier"),ae=function(e,r){return e+r.join("")},ie=/^[C=]/,ce=me(["C","="],!1,!1),fe=function(e){return e},le=/^[()]/,se=me(["(",")"],!1,!1),pe=0,ve=[{line:1,column:1}],he=0,de=[],ye=0;if("startRule"in r){if(!(r.startRule in u))throw new Error("Can't start parsing from rule \""+r.startRule+'".');a=u[r.startRule]}function ge(e,r){return{type:"literal",text:e,ignoreCase:r}}function me(e,r,t){return{type:"class",parts:e,inverted:r,ignoreCase:t}}function Ae(e){return{type:"other",description:e}}function xe(r){var t,n=ve[r];if(n)return n;for(t=r-1;!ve[t];)t--;for(n={line:(n=ve[t]).line,column:n.column};t<r;)10===e.charCodeAt(t)?(n.line++,n.column=1):n.column++,t++;return ve[r]=n,n}function be(e,r){var t=xe(e),n=xe(r);return{start:{offset:e,line:t.line,column:t.column},end:{offset:r,line:n.line,column:n.column}}}function Ce(e){pe<he||(pe>he&&(he=pe,de=[]),de.push(e))}function we(e,r,t){return new n(n.buildMessage(e,r),e,r,t)}function Ee(){var e,r;return e=pe,Se()!==o?((r=function(){var e,r,t,n,u,a;if(e=pe,(r=je())!==o){for(t=[],n=pe,(u=Se())!==o&&(a=je())!==o?n=u=[u,a]:(pe=n,n=o);n!==o;)t.push(n),n=pe,(u=Se())!==o&&(a=je())!==o?n=u=[u,a]:(pe=n,n=o);t!==o?(r=c(r,t),e=r):(pe=e,e=o)}else pe=e,e=o;return e}())===o&&(r=null),r!==o&&Se()!==o?e=i(r):(pe=e,e=o)):(pe=e,e=o),e}function Se(){var e,r;for(e=[],(r=Pe())===o&&(r=Oe())===o&&(r=Re());r!==o;)e.push(r),(r=Pe())===o&&(r=Oe())===o&&(r=Re());return e}function Fe(){var e,r;for(e=[],(r=Pe())===o&&(r=Re());r!==o;)e.push(r),(r=Pe())===o&&(r=Re());return e}function je(){var r;return(r=function(){var r,t,n,u;return r=pe,(t=Ve())!==o&&Fe()!==o?(61===e.charCodeAt(pe)?(n=x,pe++):(n=o,0===ye&&Ce(b)),n!==o&&Fe()!==o&&(u=Te())!==o?(t=C(t,u),r=t):(pe=r,r=o)):(pe=r,r=o),r}())===o&&(r=Te()),r}function Te(){var e,r,t,n,u,a;if(e=pe,(r=ke())!==o){for(t=[],n=pe,(u=Fe())!==o&&(a=ke())!==o?n=u=[u,a]:(pe=n,n=o);n!==o;)t.push(n),n=pe,(u=Fe())!==o&&(a=ke())!==o?n=u=[u,a]:(pe=n,n=o);t!==o?e=r=f(r,t):(pe=e,e=o)}else pe=e,e=o;return e}function ke(){var r,t,n,u,a,i,c;if(r=pe,(t=Ve())!==o&&(t=l(t)),(r=t)===o&&(r=pe,67===e.charCodeAt(pe)?(t=s,pe++):(t=o,0===ye&&Ce(p)),t!==o?(40===e.charCodeAt(pe)?(n=v,pe++):(n=o,0===ye&&Ce(h)),n!==o&&(u=Fe())!==o?((a=Te())===o&&(a=null),a!==o&&(i=Fe())!==o?(41===e.charCodeAt(pe)?(c=d,pe++):(c=o,0===ye&&Ce(y)),c!==o?r=t=g(a):(pe=r,r=o)):(pe=r,r=o)):(pe=r,r=o)):(pe=r,r=o),r===o&&(r=pe,40===e.charCodeAt(pe)?(t=v,pe++):(t=o,0===ye&&Ce(h)),t!==o&&(n=Fe())!==o?((u=Te())===o&&(u=null),u!==o&&(a=Fe())!==o?(41===e.charCodeAt(pe)?(i=d,pe++):(i=o,0===ye&&Ce(y)),i!==o?r=t=m(u):(pe=r,r=o)):(pe=r,r=o)):(pe=r,r=o),r===o))){if(r=pe,t=[],67===e.charCodeAt(pe)?(n=s,pe++):(n=o,0===ye&&Ce(p)),n!==o)for(;n!==o;)t.push(n),67===e.charCodeAt(pe)?(n=s,pe++):(n=o,0===ye&&Ce(p));else t=o;t!==o&&(t=A(t)),r=t}return r}function _e(){var r;return e.length>pe?(r=e.charAt(pe),pe++):(r=o,0===ye&&Ce(w)),r}function Pe(){var r;return ye++,9===e.charCodeAt(pe)?(r=S,pe++):(r=o,0===ye&&Ce(F)),r===o&&(11===e.charCodeAt(pe)?(r=j,pe++):(r=o,0===ye&&Ce(T)),r===o&&(12===e.charCodeAt(pe)?(r=k,pe++):(r=o,0===ye&&Ce(_)),r===o&&(32===e.charCodeAt(pe)?(r=P,pe++):(r=o,0===ye&&Ce(M)),r===o&&(160===e.charCodeAt(pe)?(r=O,pe++):(r=o,0===ye&&Ce(R)),r===o&&(65279===e.charCodeAt(pe)?(r=V,pe++):(r=o,0===ye&&Ce(I)),r===o&&(r=function(){var r;return N.test(e.charAt(pe))?(r=e.charAt(pe),pe++):(r=o,0===ye&&Ce(U)),r}())))))),ye--,r===o&&0===ye&&Ce(E),r}function Me(){var r;return q.test(e.charAt(pe))?(r=e.charAt(pe),pe++):(r=o,0===ye&&Ce(z)),r}function Oe(){var r;return ye++,10===e.charCodeAt(pe)?(r=D,pe++):(r=o,0===ye&&Ce(G)),r===o&&(e.substr(pe,2)===H?(r=H,pe+=2):(r=o,0===ye&&Ce(J)),r===o&&(13===e.charCodeAt(pe)?(r=K,pe++):(r=o,0===ye&&Ce(L)),r===o&&(8232===e.charCodeAt(pe)?(r=Q,pe++):(r=o,0===ye&&Ce(W)),r===o&&(8233===e.charCodeAt(pe)?(r=X,pe++):(r=o,0===ye&&Ce(Y)))))),ye--,r===o&&0===ye&&Ce(B),r}function Re(){var r;return ye++,(r=function(){var r,t,n,u,a,i;if(r=pe,e.substr(pe,2)===$?(t=$,pe+=2):(t=o,0===ye&&Ce(ee)),t!==o){for(n=[],u=pe,a=pe,ye++,e.substr(pe,2)===re?(i=re,pe+=2):(i=o,0===ye&&Ce(te)),ye--,i===o?a=void 0:(pe=a,a=o),a!==o&&(i=_e())!==o?u=a=[a,i]:(pe=u,u=o);u!==o;)n.push(u),u=pe,a=pe,ye++,e.substr(pe,2)===re?(i=re,pe+=2):(i=o,0===ye&&Ce(te)),ye--,i===o?a=void 0:(pe=a,a=o),a!==o&&(i=_e())!==o?u=a=[a,i]:(pe=u,u=o);n!==o?(e.substr(pe,2)===re?(u=re,pe+=2):(u=o,0===ye&&Ce(te)),u!==o?r=t=[t,n,u]:(pe=r,r=o)):(pe=r,r=o)}else pe=r,r=o;return r}())===o&&(r=function(){var r,t,n,u,a,i;if(r=pe,e.substr(pe,2)===ne?(t=ne,pe+=2):(t=o,0===ye&&Ce(oe)),t!==o){for(n=[],u=pe,a=pe,ye++,i=Me(),ye--,i===o?a=void 0:(pe=a,a=o),a!==o&&(i=_e())!==o?u=a=[a,i]:(pe=u,u=o);u!==o;)n.push(u),u=pe,a=pe,ye++,i=Me(),ye--,i===o?a=void 0:(pe=a,a=o),a!==o&&(i=_e())!==o?u=a=[a,i]:(pe=u,u=o);n!==o?r=t=[t,n]:(pe=r,r=o)}else pe=r,r=o;return r}()),ye--,r===o&&0===ye&&Ce(Z),r}function Ve(){var r,t,n,u;if(ye++,r=pe,(t=function(){var r,t,n;return r=pe,t=pe,ye++,ie.test(e.charAt(pe))?(n=e.charAt(pe),pe++):(n=o,0===ye&&Ce(ce)),ye--,n===o?t=void 0:(pe=t,t=o),t!==o&&(n=Ie())!==o?(t=fe(n),r=t):(pe=r,r=o),r}())!==o){for(n=[],u=Ie();u!==o;)n.push(u),u=Ie();n!==o?r=t=ae(t,n):(pe=r,r=o)}else pe=r,r=o;return ye--,r===o&&(t=o,0===ye&&Ce(ue)),r}function Ie(){var r,t,n,u,a;return r=pe,t=pe,ye++,n=Pe(),ye--,n===o?t=void 0:(pe=t,t=o),t!==o?(n=pe,ye++,u=Me(),ye--,u===o?n=void 0:(pe=n,n=o),n!==o?(u=pe,ye++,le.test(e.charAt(pe))?(a=e.charAt(pe),pe++):(a=o,0===ye&&Ce(se)),ye--,a===o?u=void 0:(pe=u,u=o),u!==o&&(a=_e())!==o?r=t=fe(a):(pe=r,r=o)):(pe=r,r=o)):(pe=r,r=o),r}if((t=a())!==o&&pe===e.length)return t;throw t!==o&&pe<e.length&&Ce({type:"end"}),we(de,he<e.length?e.charAt(he):null,he<e.length?be(he,he+1):be(he,he))}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Transpiler=r.default=void 0;var n,o=(n=t(0))&&n.__esModule?n:{default:n};function u(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(r){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),this.tree=null,this.reset(),r&&this.parse(r)}var r,t,n;return r=e,(t=[{key:"reset",value:function(){this.variables={}}},{key:"parse",value:function(e){this.tree=o.default.parse(e)}},{key:"compile",value:function(){var e=this;this.reset();var r="",t=this.tree;if(!t)throw new Error("no tree");return t.forEach(function(t){if("assignment"===t.type){if(e.variables[t.name])throw new Error('"'.concat(t.name,'" is already defined'));e.variables[t.name]=e.convertValuesToString(t.payload)}else{if("values"!==t.type)throw new Error("invalid type");r+=e.convertValuesToString(t)}}),r}},{key:"convertValuesToString",value:function(e){var r=this;if(!e)throw new Error("invalid value");var t="";return e.payload.forEach(function(e){if("variable"===e.type){var n=e.name;if(!r.variables[n])throw new Error('"'.concat(n,'" is undefined'));t+=r.variables[n]}else if("primitive"===e.type)t+=r.convertPrimitive(e);else if("parenthesis"===e.type)t+=e.value;else{if("values"!==e.type)throw new Error("invalid type ".concat(e.type));t+=r.convertValuesToString(e)}}),t}},{key:"convertPrimitive",value:function(e){if(!e)throw new Error("invalid primitive");var r=e.value.length;if(!Number.isSafeInteger(r))throw new Error("invalid primitive");return"+!"[r%2]}}])&&u(r.prototype,t),n&&u(r,n),e}();r.Transpiler=r.default=a}])});